(this["webpackJsonpwetrakph-admin"]=this["webpackJsonpwetrakph-admin"]||[]).push([[0],{216:function(e,t,a){e.exports=a(397)},397:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),o=a.n(i),c=a(32),s=a(62),l=a(36),u=a(2),g=function(e){var t=e.component,a=e.isAuthenticated,n=e.isVerifying,i=Object(u.a)(e,["component","isAuthenticated","isVerifying"]);return r.a.createElement(l.b,Object.assign({},i,{render:function(e){return n?r.a.createElement("div",null):a?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},h=a(52),d=a(23),m=a(87),p=a(88),E=a(93),f=a(207),b=a.n(f),v=(a(226),a(228),b.a.initializeApp({apiKey:"AIzaSyCSvntYCzkfrQ6U53j47OStG9btiiNWNqU",authDomain:"wetrakph-c627b.firebaseapp.com",databaseURL:"https://wetrakph-c627b.firebaseio.com",projectId:"wetrakph-c627b",storageBucket:"wetrakph-c627b.appspot.com",messagingSenderId:"561036518593",appId:"1:561036518593:web:4b12993cf3c1d1488c6040",measurementId:"G-VG6NXWM46Y"})),O=(v.firestore(),function(e){return{type:"LOGIN_SUCCESS",user:e}}),y=function(e,t){return function(a){a({type:"LOGIN_REQUEST"}),v.auth().signInWithEmailAndPassword(e,t).then((function(e){a(O(e))})).catch((function(e){a({type:"LOGIN_FAILURE"})}))}},L=function(){return function(e){e({type:"LOGOUT_REQUEST"}),v.auth().signOut().then((function(){e({type:"LOGOUT_SUCCESS"})})).catch((function(t){e({type:"LOGOUT_FAILURE"})}))}},S=function(e){var t=e.devices;return console.log(t),r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h1",null,"Device List")),Object.keys(t).map((function(e){return r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h5",{class:"card-title"},e.deviceName),r.a.createElement("h6",{class:"card-subtitle mb-2 text-muted"},e.deviceName),r.a.createElement("p",{class:"card-text"},e.deviceType)))})))},j=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){(0,a.props.dispatch)(L())},a.state={devices:[]},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://wetrakph-api.firebaseapp.com/api/v1/devices").then((function(e){return e.json()})).then((function(t){console.log(t.devices[0]),e.state.devices.push(t.devices),console.log(e.state.devices)})).catch(console.log)}},{key:"render",value:function(){var e=this.props,t=e.isLoggingOut,a=e.logoutError;return r.a.createElement("div",null,r.a.createElement("h1",null,"This is your app's protected area."),r.a.createElement("p",null,"Any routes here will also be protected"),r.a.createElement("button",{onClick:this.handleLogout},"Logout"),t&&r.a.createElement("p",null,"Logging Out...."),a&&r.a.createElement("p",null,"Error logging out"),r.a.createElement(S,{devices:this.state.devices}))}}]),t}(n.Component);var w=Object(c.b)((function(e){return{isLoggingOut:e.auth.isLoggingOut,logoutError:e.auth.logoutError}}))(j),I=a(398),C=a(434),A=a(433),U=a(432),k=a(208),T=a.n(k),R=a(431),_=a(430),G=a(426),N=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleEmailChange=function(e){var t=e.target;a.setState({email:t.value})},a.handlePasswordChange=function(e){var t=e.target;a.setState({password:t.value})},a.handleSubmit=function(){var e=a.props.dispatch,t=a.state,n=t.email,r=t.password;e(y(n,r))},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.loginError;return e.isAuthenticated?r.a.createElement(l.a,{to:"/"}):r.a.createElement(G.a,{component:"main",maxWidth:"xs"},r.a.createElement(_.a,{className:t.paper},r.a.createElement(C.a,{className:t.avatar},r.a.createElement(T.a,null)),r.a.createElement(R.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(U.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",onChange:this.handleEmailChange}),r.a.createElement(U.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:this.handlePasswordChange}),a&&r.a.createElement(R.a,{component:"p",className:t.errorText},"Incorrect email or password."),r.a.createElement(A.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:this.handleSubmit},"Sign In")))}}]),t}(n.Component);var V=Object(I.a)((function(){return{"@global":{body:{backgroundColor:"#fff"}},paper:{marginTop:100,display:"flex",padding:20,flexDirection:"column",alignItems:"center"},avatar:{marginLeft:"auto",marginRight:"auto",backgroundColor:"#f50057"},form:{marginTop:1},errorText:{color:"#f50057",marginBottom:5,textAlign:"center"}}}))(Object(c.b)((function(e){return{isLoggingIn:e.auth.isLoggingIn,loginError:e.auth.loginError,isAuthenticated:e.auth.isAuthenticated}}))(N));var x=Object(c.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,isVerifying:e.auth.isVerifying}}))((function(e){var t=e.isAuthenticated,a=e.isVerifying;return r.a.createElement(l.d,null,r.a.createElement(g,{exact:!0,path:"/",component:w,isAuthenticated:t,isVerifying:a}),r.a.createElement(l.b,{path:"/login",component:V}))})),W=a(43),F=a(209),Q=a(210),Y=a(29),B=Object(W.c)({firebase:Q.firebaseReducer,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggingIn:!1,isLoggingOut:!1,isVerifying:!1,loginError:!1,logoutError:!1,isAuthenticated:!1,user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(Y.a)({},e,{isLoggingIn:!0,loginError:!1});case"LOGIN_SUCCESS":return Object(Y.a)({},e,{isLoggingIn:!1,isAuthenticated:!0,user:t.user});case"LOGIN_FAILURE":return Object(Y.a)({},e,{isLoggingIn:!1,isAuthenticated:!1,loginError:!0});case"LOGOUT_REQUEST":return Object(Y.a)({},e,{isLoggingOut:!0,logoutError:!1});case"LOGOUT_SUCCESS":return Object(Y.a)({},e,{isLoggingOut:!1,isAuthenticated:!1,user:{}});case"LOGOUT_FAILURE":return Object(Y.a)({},e,{isLoggingOut:!1,logoutError:!0});case"VERIFY_REQUEST":return Object(Y.a)({},e,{isVerifying:!0,verifyingError:!1});case"VERIFY_SUCCESS":return Object(Y.a)({},e,{isVerifying:!1});default:return e}}});var D=function(e){var t=Object(W.d)(B,e,Object(W.a)(F.a));return t.dispatch((function(e){e({type:"VERIFY_REQUEST"}),v.auth().onAuthStateChanged((function(t){null!==t&&e(O(t)),e({type:"VERIFY_SUCCESS"})}))})),t}();var P=function(){return r.a.createElement(c.a,{store:D},r.a.createElement(s.a,null,r.a.createElement(x,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[216,1,2]]]);
//# sourceMappingURL=main.b6193e78.chunk.js.map